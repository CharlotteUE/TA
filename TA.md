# TA

## 实时渲染

### 抗锯齿

1. DLSS（深度学习超采样技术）把一个超高分辨率下提前计算优化过的预设导入电脑，在高分辨率时可以获得近似于低分辨时的帧数，代价是图像质量和原生画面比起来会有所降低，也就是变得模糊。

2. FXAA以性能代价便宜和会变糊著称，有些FXAA配置减轻了变糊的程度但因此抗锯齿能力也大幅下降了。

3. SMAA是一种当显卡性能不太够的时候可以考虑的多一种选择，

   而这个不会使画面变糊。

4. RIS能够模拟高分辨率的图像，让低分辨率的画面看起来更精致，开启后基本不会造成额外性能损失。

5. TAA（Temporal Anti-Aliasing时间性抗锯齿）使用运动矢量组合两帧，在每一帧对屏幕区域内的像素进行一个抖动操作，AA往往会盲目地跟随移动物体的运动矢量，从而造成屏幕上的细节模糊不清。

## UV

1. **定义**：将三维切割成一片片的二维平面便于贴图
2. 切线找隐蔽的地方切割
3. 没有隐蔽的地方就找最方便模型展开、最短的一个位置去切割
4. 根据所烘焙的物体类型，例如是金属的还是非金属的，面与面之间转折的一个角度是多少
5. 尽量最大化的利用UV空间，先摆大的再摆小的。

## 动画

### 骨骼

1. 通过蒙皮（将表皮绑定到骨骼）分配的物体表面顶点权重来控制表面

### 叠加动画

通过一个姿势减去他的参考姿势得到的增量

在附加设置里Additive动画类型不设置成无都可以

一定要选定参考姿势

可以将叠加动画添加到动画来形成添加后的效果

例如：倾斜的姿势（选定基础站立姿势为参考姿势）添加到跑步动画可以倾斜的跑步

### 瞄准偏移

一种必须使用叠加动画的混合空间，本质还是混合空间

PS：混合空间加入动画蓝图时要使用应用<u>网格体空间Additive动画</u>(具体视情况而定)

### 动画蓝图

有事件图表和动画图表，在事件图表中设置变量来控制动画图表中的动画输出

使用动画序列：直接拖拽进动画蓝图或者直接右键搜索相应命名

使用姿势：先将动画序列在动画蓝图中找到，右键动画序列，选择单帧动画，选择第几秒处，可以去动画序列里找到所要姿势在第几秒

保存姿势：右键找到保存姿势，保存后的姿势可以通过`使用缓存姿势`来使用，如果在状态机中需要多次使用这个姿势可以用这种方式 

使用混合空间：直接拖拽进动画蓝图或者直接右键搜索相应命名，然后用设置的变量来控制混合权重，可以用  <u>网格体空间Additive动画</u>  节点将一个混合空间叠加到另一个混合空间上

使用瞄准偏移：直接拖拽进动画蓝图或者直接右键搜索相应命名，可以使用一个混合空间作为*base*来叠加直接叠加上去

<u>变换（修改）骨骼</u> 节点：（与直接在动画蓝图的骨骼中修改效果相同）骨骼节点细节中的要选定要修改的骨骼以及更改所进行操作的模式（忽略的就不生效，添加就是在原基础上添加）			Alpha可以调混合度（修改程度）细节面板可以将Alpha调成曲线

<u> 双骨骼IK</u> 节点：在细节面板选定终点关节，根据起始关节和终点关节来计算中间关节的位置，在视口中移动坐标系时会同时移动两个骨骼；*Joint Target Location*用于为中间关节确定一个平面，利用起始、中间、终点三关节三点共面来确定中间关节的位置

**PS:** *IK*（Inverse Kinematics）即逆向运动学，提供一种从末端执行器的位置处理关节旋转的方法，可以是角色或骨架网格体的运动看起来对其环境更具反应性

<u>混合</u> （blend）节点：可以将姿势与姿势或者动画序列与动画序列混合，其结果与混合空间一致，其细节面板中可以调整插值速度；细节面板中的映射（勾选映射范围开启）可以将输入的变量（假设他不是0-1）等比例转换为0-1输出到插值上（比如变量范围是0-500即面板上范围内为0-500，那么其范围外为0-1，当变量是500时，输出为1）； 勾选限制结果可以当变量值超过最大范围内的时候输出范围外的1值

（非动画蓝图）	<u>F插值到</u> 节点：*Delta Time*表示从*Current*到*Target*的所用时间；*Interp Speed*表示所用速度

基于枚举的混合：比如<u>混合姿势</u> 节点，默认姿势和混合姿势用一个变量来控制，混合时间（节点中可调）即所用时间；其他比如<u>按整形混合</u>、<u>按布尔混合</u>同理，其中<u>混合多引脚</u>可以混合多个姿势

### 同步组

用以解决当动画长度不一样（比如行走循环一般比跑步循环长）时，混合不同步![非同步情况](C:\Users\一尘上仙\Videos\Captures\非同步情况.png)

使用同步组来设置一个领导者和跟随者，跟随者的动画长度会按比例调整为领导者的动画长度

跑步为领导者的情况![跑步为领导者](C:\Users\一尘上仙\Videos\Captures\跑步为领导者.png)

行走为领导者的情况![行走为领导者](C:\Users\一尘上仙\Videos\Captures\行走为领导者.png)



在动画序列的细节面板中将分组名设置为一样即在一个同步组里，分组角色如果两者若都是可为领路者，则从跑步切换到行走时以行走为领导者，从行走切换到跑步时以跑步为领导者，固定领路者则始终以其为领导者，固定跟随者则始终为跟随者

在相应的动画里会有一个同步标记，标记处无论跑步还是行走都会使用同一个脚，来以很好的方式同步动画；同一组的所有动画标记必须相同才有效，比如有一个动画缺少“右脚落下”的标记则在决定该帧的位置时会忽略其他所有动画中的该标记

### 蒙太奇

蒙太奇资产中有一个插槽，在动画蓝图中可以使用<u>插槽</u>节点来将想要实现的动画**插入到**一般动画（比如行走）与输出姿势之前，并在人物蓝图中设定什么时候将其插入。蒙太奇就能顺滑的插入播放出来并顺滑的回归到一般动画（比如行走）

建立蒙太奇动画：将动画序列加入时间轴中，可以在蒙太奇区域右键新建蒙太奇片段以分割动画，在右下方“蒙太奇片段”中可以对箭头进行操作来选定下一个片段是哪一个片段或者用“移除链接”来分层

### 曲线

位于动画资产当中，可以调整模型自带变量或者更改材质变量（需为浮点数类型）

更改材质变量：找到骨骼，添加曲线，曲线名同材质中变量名，勾选材质

可以在一些混合节点中选取动画曲线值，然后用同名曲线名来控制

蓝图中可以用<u>获取曲线值</u>来获取曲线值；非动画蓝图要先用<u>获取动画实例</u>

### 动画通知

在动画的某一帧想要有声音或者特效，设置一个通知来触发

在动画的通知轨道右键添加通知，然后在动画蓝图中作为自定义事件调用触发

通知状态是一个时间段，比如刀光拖影用这个

新建一个蓝图类`AnimNotifys`在函数栏重载，已接收通知，图表中编辑收到通知后的逻辑。然后在动画中添加通知中找到该通知蓝图。

也可以不重载，选择获取通知名称，选择之前在动画中设置好的通知，然后在图表中编辑逻辑。

这种做法可以使该通知蓝图被反复利用

### 根运动

由动画主导来移动根骨骼，一般播放蒙太奇时使用

强制根锁定可以让动画始终锁定在根骨骼的位置

### 过度规则

细节面板中基于状态中序列播放器的自动规则勾选后等同于在规则中使用`获取相关动画时间剩余部分`==0，也就是当前一个动画播放完后就自动播放下一个动画

细节面板中过度规则共享可以使多个规则相同

细节面板中时长为过度所用时长

细节面板中混合配置可以选择骨骼的混合方式；在骨骼中可以调整建立混合配置来调整每根骨骼的混合权重

细节面板中混合设置中的共享无法改变混合配置但可以改变其他

细节面板中通知与动画通知类似

使动作自然的切换：在混合逻辑处选择惯性化，然后在规则图表中加入`惯性化`节点，动作到哪一帧就从哪一帧过度

### 管道

类似于状态但是没有动画输出，用于分流状态，本身是一个条件

### 姿势快照

**在人物蓝图中**

`mesh`然后`获取动画实例`然后`保存姿势快照`可以将物理状态下的姿势保存下来

**在动画蓝图中**

用`姿势快照`使用之前保存的姿势

比如倒地后起身，保存倒地姿势，在状态机中用插槽插入起身动画

### 布娃娃系统（Ragdoll）

由于角色一般使用胶囊体判定碰撞等物理信息，所以在蓝图中先设置胶囊体为无碰撞然后设置*Mesh*为纯物理，然后设置物理对象类型为纯物理体

![布娃娃系统设置物理](C:\Users\一尘上仙\Videos\Captures\布娃娃系统设置物理.png)



![设置所有形体模拟物理现象](C:\Users\一尘上仙\Videos\Captures\设置所有形体模拟物理现象.png)

然后进行模拟物理现象

还有一个`设置模拟物理现象线下方所有形体`节点可以选定骨骼进行模拟

### 动画层

类似于函数或者宏，有一个输出姿势，可以增加输入

使用`关联的动画图层`来使用动画层

动画层接口类 类似于蓝图接口

### 动画修改器 （AnimationModifier） [dianji](https://www.bilibili.com/video/BV12f4y1r71N?p=32)

一个蓝图类，在动画中可以修改曲线和对应骨骼

图表中只有事件恢复时和事件应用时两种方法
